<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>HiGlass Zarr Data Fetcher</title>
  <style type="text/css">
    .canvasjs-chart-credit {
      display: none;
    }
  </style>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://unpkg.com/higlass@1.12.4/dist/hglib.css">
  <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/pixi.js@5/dist/pixi.min.js"></script>
  <script crossorigin src="https://unpkg.com/higlass@1.12.4/dist/hglib.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.32.1/react-bootstrap.min.js"></script>
</head>
<body>
Here's some text
<div style=""></div>
<div style="margin: auto">
  <div style="height: 1500px; width: 600px; border: 1px solid black;"
       id="development-demo">
  </div>
</div>
And some other text
<div style="height: 1500px"></div>
</body>
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-77756807-1', 'auto');
  ga('send', 'pageview');
</script>
<script type="module">
  import register from 'higlass-register';
  import { ZarrMultivecDataFetcher } from './dist/index.js';

  register(
    { dataFetcher: ZarrMultivecDataFetcher, config: ZarrMultivecDataFetcher.config },
    { pluginType: "dataFetcher" }
  );

  const viewConfig = {
    "editable": true,
    "zoomFixed": false,
    "trackSourceServers": [
      "//higlass.io/api/v1"
    ],
    "exportViewUrl": "/api/v1/viewconfs",
    "views": [
      {
        "initialXDomain": [
          -2.3283064365386963e-10,
          249999999.99999997
        ],
        "initialYDomain": [
          1427772999.601453,
          1610402869.7313232
        ],
        "genomePositionSearchBoxVisible": true,
        "genomePositionSearchBox": {
          "autocompleteServer": "//higlass.io/api/v1",
          "chromInfoServer": "//higlass.io/api/v1",
          "visible": true,
          "chromInfoId": "hg38"
        },
        "tracks": {
          "top": [
            {
              "type": "horizontal-chromosome-labels",
              "server": "//higlass.io/api/v1",
              "tilesetUid": "NyITQvZsS_mOFNlz5C2LJg",
              "uid": "chromosome-labels-track",
              "options": {
                "showMousePosition": false,
                "mousePositionColor": "#999999",
                "color": "#808080",
                "stroke": "#ffffff",
                "fontSize": 12,
                "fontIsLeftAligned": false
              },
              "width": 1027,
              "height": 30
            },
            {
              "type": "horizontal-gene-annotations",
              "server": "//higlass.io/api/v1",
              "tilesetUid": "P0PLbQMwTYGy-5uPIQid7A",
              "uid": "gene-labels-track",
              "options": {
                "labelColor": "black",
                "labelPosition": "hidden",
                "plusStrandColor": "blue",
                "minusStrandColor": "red",
                "trackBorderWidth": 0,
                "trackBorderColor": "black",
                "showMousePosition": false,
                "name": "gene-annotations-hg38_3d2Hebg.db",
                "mousePositionColor": "#999999",
                "fontSize": 10,
                "labelBackgroundColor": "#ffffff",
                "labelLeftMargin": 0,
                "labelRightMargin": 0,
                "labelTopMargin": 0,
                "labelBottomMargin": 0,
                "minHeight": 24,
                "geneAnnotationHeight": 12,
                "geneLabelPosition": "outside",
                "geneStrandSpacing": 4
              },
              "width": 568,
              "height": 70
            },
            {
              "type": "horizontal-bar",
              "uid": "demo-bar-track",
              "data": {
                "type": "zarr-multivec",
                "url": "https://higlass-serverless.s3.amazonaws.com/multivec/Homo_sapiens__AFF4__all.multires.zarr",
                "row": 2,
              },
              "options": {
                "labelColor": "black",
                "labelPosition": "topLeft",
                "axisPositionHorizontal": "right",
                "barFillColor": "darkgreen",
                "valueScaling": "linear",
                "trackBorderWidth": 0,
                "trackBorderColor": "black",
                "labelTextOpacity": 0.4,
                "barOpacity": 1,
                "align": "bottom",
                "labelLeftMargin": 0,
                "labelRightMargin": 0,
                "labelTopMargin": 0,
                "labelBottomMargin": 0,
                "labelShowResolution": false,
                "axisLabelFormatting": "scientific",
                "labelShowAssembly": true
              },
              "width": 568,
              "height": 42
            }
          ],
          "left": [],
          "center": [
            {
              "type": "horizontal-multivec",
              "uid": "demo-multivec-track",
              "data": {
                "type": "zarr-multivec",
                "url": "https://higlass-serverless.s3.amazonaws.com/multivec/Homo_sapiens__AFF4__all.multires.zarr",
              },
              "options": {
                "labelPosition": "hidden",
                "labelColor": "black",
                "labelTextOpacity": 0.4,
                "valueScaling": "linear",
                "trackBorderWidth": 0,
                "trackBorderColor": "black",
                "heatmapValueScaling": "log",
                "labelLeftMargin": 0,
                "labelRightMargin": 0,
                "labelTopMargin": 0,
                "labelBottomMargin": 0,
                "labelShowResolution": true,
                "minHeight": 100,
                "colorbarPosition": "bottomLeft",
                "zeroValueColor": "dimgray",
                "selectRows": null,
                "selectRowsAggregationMethod": "client",
                "selectRowsAggregationMode": "sum",
                "selectRowsAggregationWithRelativeHeight": false,
                "colorbarBackgroundColor": "#ffffff",
                "scaleStartPercent": "0.00000",
                "scaleEndPercent": "1.00000"
              },
              "width": 1607,
              "height": 682
            }
          ],
          "bottom": [],
          "right": [],
          "whole": [],
          "gallery": []
        },
        "layout": {
          "w": 12,
          "h": 79,
          "x": 0,
          "y": 0
        },
        "uid": "cistrome-aggregation-test-view"
      }
    ],
    "zoomLocks": {
      "locksByViewUid": {},
      "locksDict": {}
    },
    "locationLocks": {
      "locksByViewUid": {},
      "locksDict": {}
    },
    "valueScaleLocks": {
      "locksByViewUid": {},
      "locksDict": {}
    }
};

  window.hglib.viewer(
    document.getElementById('development-demo'),
    viewConfig,
    { bounded: false },
  );
</script>
</html>
